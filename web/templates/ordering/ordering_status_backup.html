<!DOCTYPE html>
<html>
<header>{% include "header.html" %}
    <style>
        @page {
            size: A4 portrait;
            margin: 15px;
        }

        @media print {
            body {
                margin: 0px 15px 10px 15px;
            }

            .page-break {
                page-break-inside: auto;
                page-break-after: auto
            }
        }

        .content-table2 {
            height: 95vh;
            overflow: scroll;
            overflow-scrolling: auto;
        }

        .content-table2 table {
            border-collapse: collapse;
            border-spacing: 0;
            border: 0;
        }

        .content-table2 thead {
        }

        .content-table2 thead tr:first-child th {
            position: sticky;
            position: -webkit-sticky;
            top: 0;
            outline: 1px solid #333333 !important;
            border: none;
            outline-offset: -1px;
            vertical-align: middle !important;
            color: #002060;
            background-color: #C6E0B4;
            border-collapse: collapse;
            border-spacing: 0;
            white-space: nowrap;
            padding: 0.3rem 1.5rem !important;
            background-clip: padding-box;
        }

        .content-table2 thead tr:nth-child(2) th {
            position: sticky;
            position: -webkit-sticky;
            top: 2.05rem;
            outline: 1px solid #333333 !important;
            border: none;
            outline-offset: -1px;
            vertical-align: middle !important;
            color: #002060;
            background-color: #C6E0B4;
            border-collapse: collapse;
            border-spacing: 0;
            white-space: nowrap;
            padding: 0.3rem 1.5rem !important;
            background-clip: padding-box;
        }

        .content-table2 thead tr:first-child th:first-child {
            left: 0;
            z-index: 1;
        }

        .content-table2 tbody td {
            outline: 1px solid #333333 !important;
            border: none;
            outline-offset: -1px;
            border-collapse: collapse;
            white-space: nowrap;
            border-spacing: 0;
            background-clip: padding-box;
            overflow: hidden;
        }

        .content-table2 tbody td:first-child {
            left: 0;
            background-color: inherit;
            position: sticky;
            position: -webkit-sticky;
        }

        .content-table3 {
            height: 95vh;
            overflow: scroll;
            overflow-scrolling: auto;
        }

        .content-table3 table {
            border-collapse: collapse;
            border-spacing: 0;
            border: 0;
        }

        .content-table3 thead {
        }

        .content-table3 thead tr:first-child th {
            position: sticky;
            position: -webkit-sticky;
            top: 0;
            outline: 1px solid #333333 !important;
            border: none;
            outline-offset: -1px;
            vertical-align: middle !important;
            color: #002060;
            background-color: #d0dff1;
            border-collapse: collapse;
            border-spacing: 0;
            white-space: nowrap;
            padding: 0.3rem 1.5rem !important;
            background-clip: padding-box;
        }

        .content-table3 thead tr:nth-child(2) th {
            position: sticky;
            position: -webkit-sticky;
            top: 2.05rem;
            outline: 1px solid #333333 !important;
            border: none;
            outline-offset: -1px;
            vertical-align: middle !important;
            color: #002060;
            background-color: #d0dff1;
            border-collapse: collapse;
            border-spacing: 0;
            white-space: nowrap;
            padding: 0.3rem 1.5rem !important;
            background-clip: padding-box;
        }

        .content-table3 thead tr:first-child th:first-child {
            left: 0;
            z-index: 1;
        }

        .content-table3 tbody td {
            outline: 1px solid #333333 !important;
            border: none;
            outline-offset: -1px;
            border-collapse: collapse;
            white-space: nowrap;
            border-spacing: 0;
            background-clip: padding-box;
            overflow: hidden;
        }

        .content-table3 tbody td:first-child {
            left: 0;
            background-color: inherit;
            position: sticky;
            position: -webkit-sticky;
        }
    </style>
</header>
<!-- 주문서조회 -->

<body style="overflow: hidden;">
{% load static %}
{{ odr.media }}

<!-- spinner -->

<!-- 주문서조회 -->
<!-- 검색 -->
<div class="card m-2">
    <div class="card-body p-2">
        <!-- 본문 -->
        <div
                class="content-search row no-gutters align-items-center content-input-group"
        >
            <div class="content-title col-1 align-self-stretch">주문서 검색</div>
            <form id="search_form" class="col-11">
                <div class="row no-gutters">
                    <div class="content-input-group col-3 px-0">
                        <div class="content-input-group-header">
                            <label>거래처</label>
                        </div>
                        <div class="content-input-group-input">
                            {{ odr.cu_name_ord }}
                            {#                            <select#}
                            {#                                    class="form-control customer_search"#}
                            {#                                    id="customer_search"#}
                            {#                            ></select>#}
                        </div>
                    </div>
                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>주문일자</label>
                        </div>
                        <div class="content-input-group-input">
                            <div class="input-group input-daterange">
                                <input
                                        type="text"
                                        class="form-control datepicker"
                                        id="created-at-after"
                                        autocomplete="off"

                                />
                                <div class="input-group-addon px-3">~</div>
                                <input
                                        type="text"
                                        class="form-control datepicker"
                                        id="created-at-before"
                                        autocomplete="off"

                                />
                            </div>
                        </div>
                    </div>
                    <div class="col-1 px-0">
                        <button
                                class="btn button-search rounded-0 w-100 h-100"
                                type="button"
                                onclick="search_click();"
                        >
                            검색
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- 주문서 테이블 -->
<div class="card m-2">
    <div class="row no-gutters card-body p-2">
        <!-- 본문 -->
        <div class="content-table col-12" style="overflow-y: hidden; height:253px;">
            <table
                    id="ordering_table"
                    class="table table-sm text-center"
            >
                <thead>
                <tr>
                    <th>순번</th>
                    <th>주문번호</th>
                    <th>주문일자</th>
                    <th>거래처</th>
                    <th>거래처담당자</th>
                    <th>담당자연락처</th>
                    <th>공급가</th>
                    <th>작성자</th>
                </tr>
                </thead>
                <tbody id="ordering_tbody"></tbody>
            </table>

            <div class="row no-gutters d-flex justify-content-center" id="item_nation"
                 style="margin-top: -20px;">
            </div>
        </div>
    </div>
</div>

<!-- 거래처정보 -->
<div class="card m-2">
    <div class="row no-gutters card-body p-2">
        <!-- 본문 -->
        <form id="main_request" class="content-content w-100">
            {% csrf_token %}
            <div class="row no-gutters w-100 mb-2">
                <div class="col-1 content-title">거래처정보</div>
                <div class="col-11">
                    <div class="row no-gutters">
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>거래처코드<strong>*</strong></label>
                            </div>
                            <div class="content-input-group-input">
                                {{ odr.cu_code_dis }}
                                {#                                <select#}
                                {#                                        class="form-control customer_code"#}
                                {#                                        id="customer_code" disabled#}
                                {#                                ></select>#}
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>거래처명<strong>*</strong></label>
                            </div>
                            <div class="content-input-group-input">
                                {{ odr.cu_name_dis }}
                                {#                                <select#}
                                {#                                        class="form-control customer_name"#}
                                {#                                        id="customer_name" disabled#}
                                {#                                ></select>#}
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>사업자번호<strong>*</strong></label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="licensee_number" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>대표자명</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="customer_owner_name" disabled/>
                            </div>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>업태</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="business_conditions" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>종목</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="business_event" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>우편번호</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="office_post_code" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>주소</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="office_address" disabled/>
                            </div>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>회사전화번호</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="office_phone" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>팩스번호</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="office_fax_number" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>담당자</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="person_in_charge" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>직급</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="charge_level" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>담당자 연락처</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="charge_phone" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header">
                                <label>E-mail</label>
                            </div>
                            <div class="content-input-group-input">
                                <input class="form-control" id="email" disabled/>
                            </div>
                        </div>
                        <div class="content-input-group col-3">
                            <div class="content-input-group-header col-2">
                                <label>비고</label>
                            </div>
                            <div class="content-input-group-input col-10">
                                <input class="form-control" id="customer_note" disabled/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>


<!-- 주문 항목 테이블 -->
<div class="card m-2">
    <div class="row no-gutters card-body p-2">

        <!-- 본문 -->
        <div class="content-table col-12" style="overflow-y: scroll; height:253px;">
            <table
                    id="detail_table"
                    class="table table-sm text-center"
            >
                <thead id="detail_thead">
                <tr>
                    <th>순번</th>
                    <th name='item_code'>품번</th>
                    <th name='item_name'>품명</th>
                    <th name='item_detail'>품명상세</th>
                    <th name='item_unit'>단위</th>
                    <th name='item_quantity'>수량</th>
                    <th name='item_price'>단가</th>
                    <th name='supply_price'>공급가</th>
                    <th name='surtax'>부가세</th>
                    <th name='item_supply_total'>합계</th>
                    <th>첨부파일</th>
                    <th name='item_remark'>비고</th>
                </tr>
                </thead>
                <tbody id="detail_tbody"></tbody>
            </table>
        </div>

    </div>
</div>
<div class="card m-2">

    {# NOTE #}
    <div class="card-body col-12 p-0">
        <div class="row no-gutters card-body p-2">
            <div class="content-title col-1 align-self-stretch">합계금액</div>
            <form id="sum_form" class="col-11 w-100">
                <div class="row no-gutters">
                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>공급가</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="supply_price" class="form-control" disabled/>
                        </div>
                    </div>
                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>부가세</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="surtax" class="form-control" disabled/>
                        </div>
                    </div>

                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>총합계</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="supply_total" class="form-control" disabled/>

                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="row no-gutters card-body p-2">
            <div class="content-title col-1 align-self-stretch">NOTE</div>
            <form id="note_form" class="col-11 w-100">
                <div class="row no-gutters">
                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>납기희망일</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="due_date" class="form-control datepicker" disabled/>
                        </div>
                    </div>
                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>결제조건</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="pay_option" class="form-control" disabled/>
                        </div>
                    </div>

                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>품질보증기한</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="guarantee_date" class="form-control datepicker" disabled/>

                        </div>
                    </div>
                </div>
                <div class="row no-gutters">

                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>납품장소</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="deliver_place" class="form-control" disabled/>
                        </div>
                    </div>
                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>비고</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <input id="note" class="form-control" disabled/>
                        </div>
                    </div>
                    <div class="content-input-group col-4 px-0">
                        <div class="content-input-group-header">
                            <label>부가세포함</label>
                        </div>
                        <div
                                class="content-input-group-input"
                        >
                            <div class="form-control" style="background-color:#e9ecef;">
                                <input class="w-100 align-center" type="checkbox" id="surtax_chk" checked
                                       style="width: 20px; height: 20px;" disabled/>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="card m-2">
    <div class="card-body col-12 p-0">
        <div class="row no-gutters card-body p-2">
            <div class="content-input-group col-3 px-0" style="margin-bottom: 6px">
                <div class="content-input-group-header">
                    <label>사업장 구분</label>
                </div>
                <div class="content-input-group-input">
                    {{ odr.cp_div_sch }}
                    {#                            <select#}
                    {#                                    class="form-control enterprise_search"#}
                    {#                                    id="enterprise_search"#}
                    {#                            ></select>#}
                </div>
            </div>
            <div class="col-12" id="detail_enterprise">
                <div class="row no-gutters">
                    <div class="d-none">
                        <div class="content-input-group-header">
                            <label>회사ID</label>
                        </div>
                        <input class="form-control" id="enterprise_id"
                               disabled/>
                    </div>
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>회사명</label>
                        </div>
                        <input class="form-control" id="enterprise_name"
                               disabled/>
                    </div>
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>사업자번호</label>
                        </div>
                        <input class="form-control" id="enterprise_licensee_number"
                               disabled/>
                    </div>
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>대표자명</label>
                        </div>
                        <input class="form-control" id="enterprise_owner_name"
                               disabled/>
                    </div>
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>대표번호</label>
                        </div>
                        <input class="form-control" id="enterprise_owner_phone"
                        />
                    </div>
                </div>
                <div class="row no-gutters">
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>업태</label>
                        </div>
                        <input class="form-control" id="enterprise_business_conditions"
                               disabled/>
                    </div>
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>종목</label>
                        </div>
                        <input class="form-control" id="enterprise_business_event"
                               disabled/>
                    </div>
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>팩스번호</label>
                        </div>
                        <div class="content-input-group-input">
                            <input class="form-control" id="enterprise_fax"/>
                        </div>
                    </div>
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>비고</label>
                        </div>
                        <div class="content-input-group-input">
                            <input class="form-control" id="enterprise_remark"/>
                        </div>
                    </div>
                </div>
                <div class="row no-gutters">
                    <div class="content-input-group col-3">
                        <div class="content-input-group-header">
                            <label>우편번호</label>
                        </div>
                        <div class="content-input-group-input">
                            <input class="form-control" id="enterprise_postal_code"/>
                        </div>
                    </div>
                    <div class="content-input-group col-6">
                        <div class="content-input-group-header">
                            <label>주소</label>
                        </div>
                        <div class="content-input-group-input">
                            <input class="form-control" id="enterprise_address"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Button -->
        <div class="row no-gutters w-100 mt-1 pb-2 pr-1 justify-content-end">
            <div class="col-1 px-0 mr-1">
                <button class="btn button-custom2 w-100"
                        type="button"
                        onclick="craete_pdf_download();">
                    PDF출력
                </button>
            </div>
        </div>
    </div>
</div>
</div>

<div style="visibility: hidden" id="print">
    <!-- 제목 -->
    <!-- 자사정보 -->
    <div>
        <div class="row no-gutters card-body p-2">
            <!-- 본문 -->
            <div class="row no-gutters w-100">
                <div class="col-12">
                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input"
                                 style="display: block; width: 100%; font-size: 15pt;">
                                <label id="ordering_send_from">(공급자 보관용) 작성일 2022년 05월 30일</label>
                            </div>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-top: 3px black solid; border-left: 3px black solid; border-right: 1px black solid; background-color: #FFFFFF;">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 3px black solid; border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid;  background: #FFFFFF">
                                <label>등록번호</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_licensee_number" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input"
                                 style="text-align: center; min-width: 100%; border-bottom: 3px black solid">
                                <div name="ordering_to"
                                     style="display: block; width: 100%; text-align: right; font-size: 15pt; font-weight: bold">
                                    귀하
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background-color: #ffffff;">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt; transform: translateY(60%); z-index: 10">
                                    공
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid; border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid;  background: #FFFFFF">
                                <label>상호</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_enterprise_name" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt; transform: translateY(60%); z-index: 10">
                                    급
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid; border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid;  background: #FFFFFF">
                                <label>성명</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_enterprise_owner_name" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div style="display: block; width: 100%; text-align: center; font-size: 15pt; font-weight: bolder">
                                <label></label>
                            </div>
                            <div class="content-input-group-input">
                                <div style="display: block; width: 100%; text-align: left; font-size: 15pt; font-weight: bolder;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt; transform: translateY(60%); z-index: 10">
                                    자
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid; border-bottom: 1px black solid; border-right: 3px black solid">
                            <div class="content-input-group-header "
                                 style="border-right: 1px black solid; background: #FFFFFF">
                                <label>주소</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_enterprise_address" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: left">아래 내용으로 계산합니다.</div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-5" style="border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid; background: #FFFFFF">
                                <label>업태</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_business_condition" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6"
                             style="border-top: 3px black solid; border-left: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-bottom: 3px black solid; background: #C6E0B4">
                                <label>합계</label>
                            </div>
                            <div class="content-input-group-input" style="border-bottom: 3px black solid;">
                                <div name="ordering_supply_total" class="form-control"
                                     style="background: #C6E0B4"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; border-bottom: 3px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid;border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid; border-bottom: 3px black solid; background: #FFFFFF">
                                <label>종목</label>
                            </div>
                            <div class="content-input-group-input" style="border-bottom: 3px black solid;">
                                <div name="ordering_business_event" class="form-control"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row no-gutters page-break">
                        <!-- 본문 -->
                        <div class="content-table2 col-12" style="overflow: auto; height: auto; margin: 0">
                            <table
                                    id="from_detail_table"
                                    class="table table-sm text-center"
                                    style="margin: 0;"
                            >
                                <thead>
                                <tr>
                                    <th style="border-bottom: 3px black solid; border-left: 3px black solid; border-right: 1px black solid; width: 7%; background: #FFFFFF">
                                        월
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 7%; background: #FFFFFF">
                                        일
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 20%; background: #FFFFFF">
                                        품명
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 23%; background: #FFFFFF">
                                        품명 상세
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 10%; background: #FFFFFF">
                                        수량
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 17%; background: #FFFFFF">
                                        단가
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 8%; background: #FFFFFF">
                                        공급가액
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 3px black solid; width: 8%; background: #FFFFFF">
                                        세액
                                    </th>
                                </tr>
                                </thead>
                                <tbody id="from_detail_tbody">
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                </tbody>
                                <tfoot>
                                <tr>
                                    <td colspan="2" class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 3px black solid; border-right: 1px black solid; border-bottom: 1px black solid; width: 15%; font-size: 2rem">
                                        공급가액
                                    </td>
                                    <td colspan="1" class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        세액
                                    </td>
                                    <td colspan='2' class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        합계금액
                                    </td>
                                    <td colspan='1' class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        미수금액
                                    </td>
                                    <td rowspan="2" class="align-middle"
                                        style="text-align: left; background: #FFFFFF; border-left: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        인수자
                                    </td>
                                    <td rowspan="2" class="align-middle"
                                        style="text-align: right; background: #FFFFFF; border-right: 3px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        (인)
                                    </td>
                                </tr>
                                <tr>
                                    <td name="ordering_supply_price" colspan="2" class="align-middle"
                                        style="text-align: center; border-left: 3px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        공급가액
                                    </td>
                                    <td name="ordering_surtax" colspan="1" class="align-middle"
                                        style="text-align: center; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        세액
                                    </td>
                                    <td name="ordering_supply_total" colspan='2' class="align-middle"
                                        style="text-align: center; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        합계금액
                                    </td>
                                    <td name="ordering_outstanding_amount" colspan='1' class="align-middle"
                                        style="text-align: center; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem"></td>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="content-input-group col-12"
                             style="border-left: 3px black solid; border-right: 3px black solid; border-bottom: 3px black solid">
                            <div class="content-input-group-header align-middle"
                                 style="border-right: 1px black solid; background: #C6E0B4">
                                <label class="align-middle" style="font-size: 2rem; height: 3em">메모</label>
                            </div>
                            <div class="content-input-group-input" style="height: 3em">
                                <div name="ordering_etc" class="form-control"
                                     style=" background: #C6E0B4; font-size: 2rem; height: 3.375em"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- 제목 -->
    <!-- 자사정보 -->
    <div>
        <div class="row no-gutters card-body p-2">
            <!-- 본문 -->
            <div class="row no-gutters w-100">
                <div class="col-12">
                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input"
                                 style="display: block; width: 100%; font-size: 15pt;">
                                <label id="ordering_send_to">(공급 받는 자 보관용) 작성일 2022년 05월 30일</label>
                            </div>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-top: 3px black solid; border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 3px black solid; border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid; background: #FFFFFF">
                                <label>등록번호</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_licensee_number" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input"
                                 style="text-align: center; min-width: 100%; border-bottom: 3px black solid">
                                <div name="ordering_to"
                                     style="display: block; width: 100%; text-align: right; font-size: 15pt; font-weight: bold">
                                    귀하
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt; transform: translateY(60%); z-index: 10">
                                    공
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid; border-right: 3px black solid; background: #FFFFFF">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid; background: #FFFFFF">
                                <label>상호</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_enterprise_name" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt; transform: translateY(60%); z-index: 10">
                                    급
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid; border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid; background: #FFFFFF">
                                <label>성명</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_enterprise_owner_name" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div style="display: block; width: 100%; text-align: center; font-size: 15pt; font-weight: bolder">
                                <label></label>
                            </div>
                            <div class="content-input-group-input">
                                <div style="display: block; width: 100%; text-align: left; font-size: 15pt; font-weight: bolder;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt; transform: translateY(60%); z-index: 10">
                                    자
                                </div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid; border-bottom: 1px black solid; border-right: 3px black solid">
                            <div class="content-input-group-header "
                                 style="border-right: 1px black solid; background: #FFFFFF">
                                <label>주소</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_enterprise_address" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: left">아래 내용으로 계산합니다.</div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-5" style="border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid; background: #FFFFFF">
                                <label>업태</label>
                            </div>
                            <div class="content-input-group-input">
                                <div name="ordering_business_condition" class="form-control"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row no-gutters">
                        <div class="content-input-group col-6"
                             style="border-top: 3px black solid; border-left: 3px black solid;">
                            <div class="content-input-group-header" style="border-bottom: 3px black solid;">
                                <label>합계</label>
                            </div>
                            <div class="content-input-group-input" style="border-bottom: 3px black solid;">
                                <div name="ordering_supply_total" class="form-control"
                                     style=" background-color: #e7f9ff;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-1"
                             style="border-left: 3px black solid; border-right: 1px black solid; border-bottom: 3px black solid; background: #FFFFFF">
                            <div class="content-input-group-input" style="min-width: 100%;">
                                <div style="display: block; width: 100%; text-align: center; font-size: 15pt;"></div>
                            </div>
                        </div>
                        <div class="content-input-group col-5"
                             style="border-top: 1px black solid;border-right: 3px black solid;">
                            <div class="content-input-group-header"
                                 style="border-right: 1px black solid; border-bottom: 3px black solid; background: #FFFFFF">
                                <label>종목</label>
                            </div>
                            <div class="content-input-group-input" style="border-bottom: 3px black solid;">
                                <div name="ordering_business_event" class="form-control"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row no-gutters page-break">
                        <!-- 본문 -->
                        <div class="content-table3 col-12" style="overflow: auto; height: auto; margin: 0">
                            <table
                                    id="to_detail_table"
                                    class="table table-sm text-center"
                                    style=" margin: 0"
                            >
                                <thead>
                                <tr>
                                    <th style="border-bottom: 3px black solid; border-left: 3px black solid; border-right: 1px black solid; width: 7%; background: #FFFFFF">
                                        월
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 7%; background: #FFFFFF">
                                        일
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 20%; background: #FFFFFF">
                                        품명
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 23%; background: #FFFFFF">
                                        품명 상세
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 10%; background: #FFFFFF">
                                        수량
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 17%; background: #FFFFFF">
                                        단가
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 1px black solid; width: 8%; background: #FFFFFF">
                                        공급가액
                                    </th>
                                    <th style="border-bottom: 3px black solid; border-right: 3px black solid; width: 8%; background: #FFFFFF">
                                        세액
                                    </th>
                                </tr>
                                </thead>
                                <tbody id="to_detail_tbody">
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                <tr>
                                    <td style="border-left: 3px black solid">1</td>
                                    <td>2</td>
                                    <td>3</td>
                                    <td>4</td>
                                    <td>5</td>
                                    <td>6</td>
                                    <td>7</td>
                                    <td style="border-right: 3px black solid">8</td>
                                </tr>
                                </tbody>
                                <tfoot>
                                <tr>
                                    <td colspan="2" class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 3px black solid; border-right: 1px black solid; border-bottom: 1px black solid; width: 15%; font-size: 2rem">
                                        공급가액
                                    </td>
                                    <td colspan="1" class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        세액
                                    </td>
                                    <td colspan='2' class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        합계금액
                                    </td>
                                    <td colspan='1' class="align-middle"
                                        style="text-align: center; background: #FFFFFF; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        미수금액
                                    </td>
                                    <td rowspan="2" class="align-middle"
                                        style="text-align: left; background: #FFFFFF; border-left: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        인수자
                                    </td>
                                    <td rowspan="2" class="align-middle"
                                        style="text-align: right; background: #FFFFFF; border-right: 3px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        (인)
                                    </td>
                                </tr>
                                <tr>
                                    <td name="ordering_supply_price" colspan="2" class="align-middle"
                                        style="text-align: center; border-left: 3px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        공급가액
                                    </td>
                                    <td name="ordering_surtax" colspan="1" class="align-middle"
                                        style="text-align: center; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        세액
                                    </td>
                                    <td name="ordering_supply_total" colspan='2' class="align-middle"
                                        style="text-align: center; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem">
                                        합계금액
                                    </td>
                                    <td name="ordering_outstanding_amount" colspan='1' class="align-middle"
                                        style="text-align: center; border-left: 1px black solid; border-right: 1px black solid; border-bottom: 1px black solid; font-size: 2rem"></td>
                                </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                    <div class="row no-gutters">
                        <div class="content-input-group col-12"
                             style="border-left: 3px black solid; border-right: 3px black solid; border-bottom: 3px black solid;">
                            <div class="content-input-group-header align-middle" style="border-right: 1px black solid;">
                                <label class="align-middle" style="font-size: 2rem; height: 3em">메모</label>
                            </div>
                            <div class="content-input-group-input" style="height: 3em">
                                <div name="ordering_etc" class="form-control"
                                     style="background-color: #e7f9ff; font-size: 2rem; height: 3.375em"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
</html>

<script src="{% static 'js/html2canvas.js' %}" type="text/javascript"></script>
<script src="{% static 'js/jspdf.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/api_codemaster.js' %}" type="text/javascript"></script>
<script src="{% static 'js/api_customer.js' %}" type="text/javascript"></script>
<script src="{% static 'js/api_request.js' %}" type="text/javascript"></script>
<script src="{% static 'js/api_paginations.js' %}" type="text/javascript"></script>
<script>
    let page1_size = 5;
    let cu_name_sch = null;

    let nation_data1 = {
        cname: 'nation1',  // 인스턴스 명과 일치해야함
        table_id: 'item_nation',
        range: 5,
        page_size: page1_size,
    };
    let nation1 = new Pnations(nation_data1, ordering_search);  // 인스턴스 명

    let list_num = 1;
    let selected_tr = null;
    let ordering_id = null;
    let myinfo_id = null;
    let ordering_date = null;

    $(".datepicker").datepicker({
        format: "yyyy-mm-dd",
        minViewMode: 0,
        maxViewMode: 2,
        autoclose: true,
        language: "ko",
        todayHighlight: 'true',
    });

    $(".datepicker").datepicker("setDate", "today");

    function isNumber(value) {
        return typeof value === 'number' && isFinite(value);
    }


    function check_unexpected_value(param) {
        if (param === undefined || param === '' || param === 'null' || param === 'undefined') {
            param = null;
        }

        return param;
    }


    $(function () {
        let now = new Date();
        let first_date = new Date(now.getFullYear(), now.getMonth(), 1);

        $("#created-at-after").datepicker("setDate", first_date);
        $("#created-at-before").datepicker("setDate", "today");

        refresh();

        // Table export
        {% comment %}
        $(parent.document).find("#excel-export").click(() =>
            init_excel_export($("#detail_table"), "거래처기준정보")
        );
        {% endcomment %}
    });


    function refresh() {
        nation1.page = 1;
        ordering_search();
    }


    function reset_customer_info() {
        $("#customer_code").val(null).trigger("change");  // 거래처코드
        $("#customer_name").val(null).trigger("change");  // 거래처명
        $("#licensee_number").val("");  // 사업자번호
        $("#customer_owner_name").val("");  // 대표자명
        $("#business_conditions").val("");  // 업태
        $("#business_event").val("");  // 종목
        $("#office_post_code").val("");  //  우편번호
        $("#office_address").val("");  // 주소
        $("#office_phone").val("");  // 회사전화번호
        $("#office_fax_number").val("");  // 팩스번호
        $("#person_in_charge").val("");  // 담당자
        $("#charge_level").val("");  // 직급
        $("#charge_phone").val("");  // 담당자 연락처
        $("#email").val("");  // 이메일
        $("#customer_note").val("");  // 비고
    }


    function reset_item_info() {
        $("#item_code").val(null).trigger("change");  // 품번
        $("#item_name").val(null).trigger("change");  // 품명
        $("#item_detail").val("");  // 품명상세
        $("#item_unit").val("");  // 단위
        $("#item_quantity").val("");  // 수량
        $("#item_price").val("");  // 단가

        $("#supply_price").val("");  // 공급가
        $("#surtax").val("");  // 부가세
        $("#supply_total").val("");  // 합계
        $("#item_remark").val("");  // 비고
    }


    function reset_total_info() {
        $("#supply_price").val("");  // 공급가
        $("#surtax").val("");  // 부가세
        $("#supply_total").val("");  // 합계
    }


    function reset_note_info() {
        $("#due_date").datepicker("setDate", "today");  // 납기희망일
        $("#pay_option").val("");  // 결제조건
        $("#guarantee_date").datepicker("setDate", "today");  // 품질보증기한
        $("#deliver_place").val("");  // 남품장소
        $("#note").val("");  // NOTE 내용고정

        $("#supply_price").val("");
        $("#surtax").val("");
        $("#supply_total").val("");
    }


    function reset_other_data() {
        reset_customer_info();
        reset_item_info();
        $('#detail_tbody').html("");

        reset_note_info();
        $('#surtax_chk').prop("checked", true);

        list_num = 1;
        selected_tr = null;
        ordering_id = null;
        nation1.page = 1;
    }

    // ac 선택시 나머지 필드 값 불러오기
    $('#id_cu_code_dis').on('select2:select', function (e) { // 거래처 코드를 선택했을때 작동을 함
        let select2_data = e.params.data;
        let cu_id_sch = select2_data.id;

        let query = "?cu_id_sch=" + cu_id_sch;

        loading_start();
        api_gp("/basic_information/customers_read/" + query, "GET", {}, (done) => {
            loading_finish();

            let data = done.results;
            let item = data[0];

            let id = item.id;
            let name = item.name;

            let option1 = new Option(name, id, true, true);
            $('#id_cu_name_dis').append(option1).trigger('change');

            let licensee_number = (item.licensee_number ? item.licensee_number : '');  // 사업자번호
            $("#licensee_number").val(licensee_number).trigger('change');

            let owner_name = (item.owner_name ? item.owner_name : '');  // 대표자명
            $("#customer_owner_name").val(owner_name).trigger('change');

            let business_conditions = (item.business_conditions ? item.business_conditions : "");  // 업태
            $("#business_conditions").val(business_conditions).trigger('change');

            let business_event = (item.business_event ? item.business_event : "");  // 종목
            $("#business_event").val(business_event).trigger('change');

            let postal_code = (item.postal_code ? item.postal_code : "");  //  우편번호
            $("#office_post_code").val(postal_code).trigger('change');

            let address = (item.address ? item.address : "");  // 주소
            $("#office_address").val(address).trigger('change');

            let office_phone = (item.office_phone ? item.office_phone : "");  // 회사전화번호
            $("#office_phone").val(office_phone).trigger('change');

            let office_fax = (item.office_fax ? item.office_fax : "");  // 팩스번호
            $("#office_fax_number").val(office_fax).trigger('change');

            let charge_name = (item.charge_name ? item.charge_name : "");  // 담당자
            $("#person_in_charge").val(charge_name).trigger('change');

            let charge_level = (item.charge_level ? item.charge_level : "");  // 직급
            $("#charge_level").val(charge_level).trigger('change');

            let charge_phone = (item.charge_phone ? item.charge_phone : "");  // 담당자 연락처
            $("#charge_phone").val(charge_phone).trigger('change');

            let email = (item.email ? item.email : "");  // 이메일
            $("#email").val(email).trigger('change');

            let etc = (item.etc ? item.etc : "");  // 비고
            $("#customer_note").val(etc).trigger('change');
        });


    });

    $('#id_cu_name_dis').on('select2:select', function (e) { // 거래처명 선택시
        let select2_data = e.params.data;

        let cu_id_sch = select2_data.id;

        let query = "?cu_id_sch=" + cu_id_sch;

        loading_start();
        api_gp("/basic_information/customers_read/" + query, "GET", {}, (done) => {
            loading_finish();

            let data = done.results;
            let item = data[0];

            let id = item.id;
            let code = item.code;

            let option1 = new Option(code, id, true, true);
            $('#id_cu_code_dis').append(option1).trigger('change');

            let licensee_number = (item.licensee_number ? item.licensee_number : '')// 사업자번호
            $("#licensee_number").val(licensee_number).trigger('change');

            let owner_name = (item.owner_name ? item.owner_name : '');  // 대표자명
            $("#customer_owner_name").val(owner_name).trigger('change');

            let business_conditions = (item.business_conditions ? item.business_conditions : "");  // 업태
            $("#business_conditions").val(business_conditions).trigger('change');

            let business_event = (item.business_event ? item.business_event : "");  // 종목
            $("#business_event").val(business_event).trigger('change');

            let postal_code = (item.postal_code ? item.postal_code : "");  //  우편번호
            $("#office_post_code").val(postal_code).trigger('change');

            let address = (item.address ? item.address : "");  // 주소
            $("#office_address").val(address).trigger('change');

            let office_phone = (item.office_phone ? item.office_phone : "");  // 회사전화번호
            $("#office_phone").val(office_phone).trigger('change');

            let office_fax = (item.office_fax ? item.office_fax : "");  // 팩스번호
            $("#office_fax_number").val(office_fax).trigger('change');

            let charge_name = (item.charge_name ? item.charge_name : "");  // 담당자
            $("#person_in_charge").val(charge_name).trigger('change');

            let charge_level = (item.charge_level ? item.charge_level : "");  // 직급
            $("#charge_level").val(charge_level).trigger('change');

            let charge_phone = (item.charge_phone ? item.charge_phone : "");  // 담당자 연락처
            $("#charge_phone").val(charge_phone).trigger('change');

            let email = (item.email ? item.email : "");  // 이메일
            $("#email").val(email).trigger('change');

            let etc = (item.etc ? item.etc : "");  // 비고
            $("#customer_note").val(etc).trigger('change');
        });
    });

    $("#id_cp_div_sch").on('select2:select', function (e) {
        let select2_data = e.params.data;

        myinfo_id = select2_data.id;

        let query = "?myinfo_id=" + myinfo_id;

        loading_start();
        api_gp("/basic_information/my_info_read/" + query, "GET", {}, (done) => {
            loading_finish();

            let data = done.results;
            let item = data[0];

            let name = (item.company_name ? item.company_name : "");
            $("#enterprise_name").val(name).trigger('change');
            $("[name=ordering_enterprise_name]").eq(0).html(name).trigger('change');
            $("[name=ordering_enterprise_name]").eq(1).html(name).trigger('change');

            let licensee_number = (item.licensee_number ? item.licensee_number : "");
            $("#enterprise_licensee_number").val(licensee_number).trigger('change');
            $('[name=ordering_licensee_number]').eq(0).html(licensee_number).trigger('change')
            $('[name=ordering_licensee_number]').eq(1).html(licensee_number).trigger('change')

            let owner_name = (item.owner_name ? item.owner_name : "");
            $("#enterprise_owner_name").val(owner_name).trigger('change');
            $('[name=ordering_enterprise_owner_name]').eq(0).html(owner_name).trigger('change')
            $('[name=ordering_enterprise_owner_name]').eq(1).html(owner_name).trigger('change')

            let owner_phone = (item.office_phone ? item.office_phone : "");
            $("#enterprise_owner_phone").val(owner_phone).trigger('change');

            let business_conditions = (item.business_conditions ? item.business_conditions : "");
            $("#enterprise_business_conditions").val(business_conditions).trigger('change');
            $('[name=ordering_business_condition]').eq(0).html(business_conditions).trigger('change')
            $('[name=ordering_business_condition]').eq(1).html(business_conditions).trigger('change')

            let business_event = (item.business_event ? item.business_event : "");
            $("#enterprise_business_event").val(business_event).trigger('change');
            $('[name=ordering_business_event]').eq(0).html(business_event).trigger('change')
            $('[name=ordering_business_event]').eq(1).html(business_event).trigger('change')

            let fax = (item.office_fax ? item.office_fax : "");
            $("#enterprise_fax").val(fax).trigger('change');

            let postal_code = (item.post_code ? item.post_code : "");
            $("#enterprise_postal_code").val(postal_code).trigger('change');

            let address = (item.address ? item.address : "");
            $("#enterprise_address").val(address).trigger('change');
            $('[name=ordering_enterprise_address]').eq(0).html(address).trigger('change')
            $('[name=ordering_enterprise_address]').eq(1).html(address).trigger('change')

            let note = (item.note ? item.note : "");
            $("#enterprise_remark").val(note).trigger('change');

            let file = (item.file ? item.file.url : "");
            $('#sign_img').attr("src", file);

            enter_email = $(this).find("option:selected").data("email");
            enter_fax = $(this).find("option:selected").data("office_fax");
            enter_call = $(this).find("option:selected").data("office_fax");
            logo_img = $(this).find("option:selected").data("logo");
        });
    })

    function reset_enterprise_info() {
        $("#enterprise_search").val(null).trigger("change");  // 사업장구분
        $("#enterprise_name").val("");  // 기업명
        $("#enterprise_licensee_number").val("");  // 사업자번호
        $("#enterprise_owner_name").val("");  // 대표자명
        $("#enterprise_business_conditions").val("");  // 업태
        $("#enterprise_business_event").val("");  // 종목
        $("#enterprise_fax").val("");  // 팩스
        $("#enterprise_owner_phone").val("");  // 대표자번호
        $("#enterprise_postal_code").val("");  // 우편번호
        $("#enterprise_address").val("");  // 주소
        $("#enterprise_remark").val("");  // 비고
    }


    function ordering_search() {
        //let customer = $('#customer_search :selected').val();
        let fr_date = $("#created-at-after").val();
        let to_date = $("#created-at-before").val();

        let query = "?page_size=" + page1_size + "&page=" + nation1.page;

        if (cu_name_sch === null) {
            query += "&";
        } else query += "&customer_id=" + cu_name_sch + "&";

        if (fr_date === null || fr_date === '') {
        } else query += "fr_date=" + fr_date + "&";
        if (to_date === null || to_date === '') {
        } else query += "to_date=" + to_date + "&";

        api_gp("/ordering/ordering_read/" + query, "GET", {}, (done) => {
            draw_ordering_table(done);
        });
    }


    function draw_ordering_table(done) {
        let rows = "";
        let data = done.results;
        let num = (((nation1.page * 1) - 1) * nation_data1["page_size"]) + 1;

        for (let i = 0; i < data.length; i++) {
            let item = data[i];

            // append it
            let row = "<tr id='" + item.id + "' style='cursor:pointer;'>";
            row += "<td>" + (num + i) + "</td>";  // 순번
            row += "<td class='d-none' name='ordering_id'>" + item.id + "</td>";  // id

            row += "<td name='ordering_code'>" + item.ordering_code + "</td>";  // 주문번호
            row += "<td name='created_at'>" + item.created_at + "</td>";  // 주문일자
            row += "<td class='d-none' name='code'>" + (item.code_id ? item.code_id : "") + "</td>";  // 거래처 코드
            row += "<td name='customer' property='" + (item.code_id ? item.code_id : "") + "'>"
                + (item.code_id ? item.code_name : "") + "</td>"; // 거래처
            row += "<td name='charge_name'>" + (item.charge_name ? item.charge_name : "") + "</td>";  // 거래처담당자
            row += "<td name='charge_phone'>" + (item.charge_phone ? item.charge_phone : "") + "</td>";  // 담당자연락처
            row += "<td name='provide_sum'>" + item.provide_sum.toLocaleString() + "</td>";  // 공급가
            row += "<td class='d-none' name='provide_surtax'>" + item.provide_surtax + "</td>";  // 부가세포함
            row += "<td name='username'>" + item.created_by + "</td>";  // 작성자

            row += "</tr>";
            rows += row;
        }

        nation1.nation_display(done);

        $('#ordering_tbody').html(rows);

        // click check
        if (ordering_id != null) {
            $("#ordering_tbody #" + ordering_id).addClass('clicked');
        }

        $('#ordering_tbody > tr').on('click', function () {

            // table click highlight
            $(this).parent().find('tr').removeClass('clicked');
            $(this).addClass('clicked');

            ordering_id = $(this).attr("id");
            ordering_date = $(this).find('[name=created_at]').html();
            ordering_code = $(this).find('[name=ordering_code]').html();
            let checked = $(this).find("[name='provide_surtax']").text();
            if (checked == 'true') {
                $('#surtax_chk').prop("checked", true);
            } else {
                $('#surtax_chk').prop("checked", false);
            }

            set_info();
            set_item();
        });
    }


    function load_detail_table(done) {
        let checked = $('#surtax_chk').is(":checked");
        if (checked) {
            $('#detail_thead tr').eq(0).find("th[name=surtax]").removeClass("d-none");
            $('#detail_thead tr').eq(0).find("th[name=item_supply_total]").removeClass("d-none");
        } else {
            $('#detail_thead tr').eq(0).find("th[name=surtax]").addClass("d-none");
            $('#detail_thead tr').eq(0).find("th[name=item_supply_total]").addClass("d-none");
        }

        let rows = "";
        let rows2 = "";
        let rows3 = "";

        let num = (((nation1.page * 1) - 1) * nation_data1["page_size"]) + 1;
        //let num2 = (((nation1.page * 1) - 1) * nation_data1["page_size"]) + 1;

        let data = done.results;

        for (let i = 0; i < data.length; i++) {
            let item = data[i];

            // append it
            let row = "<tr id='" + item.id + "' style='cursor:pointer;'>";
            row += "<td>" + (num + i) + "</td>";  // 순번
            row += "<td class='d-none' name='item_id'>" + item.item_id + "</td>";  // 품번 id
            row += "<td name='item_code'>" + (item.item_code ? item.item_code : "") + "</td>";  // 품번
            row += "<td name='item_name'>" + (item.item_name ? item.item_name : "") + "</td>";  // 품명
            row += "<td name='item_detail'>" + (item.item_detail ? item.item_detail : "") + "</td>";  // 품명상세
            row += "<td name='item_unit'>" + (item.item_unit ? item.item_unit : "") + "</td>";  // 단위
            row += "<td name='item_quantity'>" + (item.quantity ? item.quantity.toLocaleString() : 0) + "</td>";  // 수량

            row += "<td name='item_price'>" + (item.item_price ? item.item_price.toLocaleString() : 0) + "</td>";  // 단가
            row += "<td name='supply_price'>" + (item.supply_price ? item.supply_price.toLocaleString() : 0) + "</td>";  // 공급가

            if (checked) {
                row += "<td name='surtax'>" + (item.surtax ? item.surtax.toLocaleString() : 0) + "</td>";  // 부가세
                row += "<td name='item_supply_total'>" + (item.item_supply_total ? item.item_supply_total.toLocaleString() : 0) + "</td>";  // 합계
            } else {
                row += "<td class='d-none' name='surtax'>" + (item.surtax ? item.surtax.toLocaleString() : 0) + "</td>";  // 부가세
                row += "<td class='d-none' name='item_supply_total'>" + (item.item_supply_total ? item.item_supply_total.toLocaleString() : 0) + "</td>";  // 합계
            }

            row += "<td name='item_down' style='max-width:100px; font-size:12px;text-overflow: ellipsis; overflow:hidden;white-space: nowrap' >"
                + (item.file ? "<a href='" + item.file + "' download>" + get_fname(item.file) + "</a>" : '') + "</td>";

            row += "<td name='item_remark'>" + (item.remarks ? item.remarks : "") + "</td>";  // 비고

            row += "</tr>";
            rows += row;

            if (i % 2 === 0) {
                let row2 = "<tr>";
                row2 += "<td class='align-middle' style='border-left: 3px black solid; border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].startsWith('0') ? ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].replace('0', '') : ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0]) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (ordering_date.replace(/.+(-)/g, '').startsWith('0') ? ordering_date.replace(/.+(-)/g, '').replace('0', '') : ordering_date.replace(/.+(-)/g, '')) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (item.item_name ? item.item_name : "") + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (item.item_detail ? item.item_detail : "") + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (item.quantity ? item.quantity.toLocaleString() : 0) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (item.item_price ? item.item_price.toLocaleString() : 0) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (item.supply_price ? item.supply_price.toLocaleString() : 0) + "</td>";
                row2 += "<td class='align-middle' style='border-right: 3px black solid; border-bottom: 1px black solid; background: #C6E0B4; font-size: 2rem'>" + (item.surtax ? item.surtax.toLocaleString() : 0) + "</td>";
                row2 += "</tr>";

                let row3 = "<tr>";
                row3 += "<td class='align-middle' style='border-left: 3px black solid; border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>" + (ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].startsWith('0') ? ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].replace('0', '') : ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0]) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>" + (ordering_date.replace(/.+(-)/g, '').startsWith('0') ? ordering_date.replace(/.+(-)/g, '').replace('0', '') : ordering_date.replace(/.+(-)/g, '')) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>" + (item.item_name ? item.item_name : "") + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>" + (item.item_detail ? item.item_detail : "") + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>" + (item.quantity ? item.quantity.toLocaleString() : 0) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>" + (item.item_price ? item.item_price.toLocaleString() : 0) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid;; background: #f3faff; font-size: 2rem'>" + (item.supply_price ? item.supply_price.toLocaleString() : 0) + "</td>";
                row3 += "<td class='align-middle' style='border-right: 3px black solid; border-bottom: 1px black solid; background: #f3faff; font-size: 2rem'>" + (item.surtax ? item.surtax.toLocaleString() : 0) + "</td>";
                row3 += "</tr>"

                rows2 += row2
                rows3 += row3
            } else {
                let row2 = "<tr>";
                row2 += "<td class='align-middle' style='border-left: 3px black solid; border-right: 1px black solid; font-size: 2rem'>" + (ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].startsWith('0') ? ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].replace('0', '') : ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0]) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (ordering_date.replace(/.+(-)/g, '').startsWith('0') ? ordering_date.replace(/.+(-)/g, '').replace('0', '') : ordering_date.replace(/.+(-)/g, '')) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.item_name ? item.item_name : "") + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.item_detail ? item.item_detail : "") + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.quantity ? item.quantity.toLocaleString() : 0) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.item_price ? item.item_price.toLocaleString() : 0) + "</td>";
                row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.supply_price ? item.supply_price.toLocaleString() : 0) + "</td>";
                row2 += "<td class='align-middle' style='border-right: 3px black solid; font-size: 2rem'>" + (item.surtax ? item.surtax.toLocaleString() : 0) + "</td>";
                row2 += "</tr>";

                let row3 = "<tr>";
                row3 += "<td class='align-middle' style='border-left: 3px black solid; border-right: 1px black solid; font-size: 2rem'>" + (ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].startsWith('0') ? ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0].replace('0', '') : ordering_date.match(/(?<=\-)(.*?)(?=\-)/g)[0]) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (ordering_date.replace(/.+(-)/g, '').startsWith('0') ? ordering_date.replace(/.+(-)/g, '').replace('0', '') : ordering_date.replace(/.+(-)/g, '')) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.item_name ? item.item_name : "") + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.item_detail ? item.item_detail : "") + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.quantity ? item.quantity.toLocaleString() : 0) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.item_price ? item.item_price.toLocaleString() : 0) + "</td>";
                row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>" + (item.supply_price ? item.supply_price.toLocaleString() : 0) + "</td>";
                row3 += "<td class='align-middle' style='border-right: 3px black solid; font-size: 2rem'>" + (item.surtax ? item.surtax.toLocaleString() : 0) + "</td>";
                row3 += "</tr>"

                rows2 += row2
                rows3 += row3
            }
        }

        if (data.length != 12) {
            for (let i = data.length; i < 12; i++) {
                if (i % 2 === 0) {
                    let row2 = "<tr>";
                    row2 += "<td class='align-middle' style='border-left: 3px black solid; border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-right: 3px black solid; border-bottom: 1px black solid; background: #C6E0B4; font-size: 2rem'>&nbsp;</td>";
                    row2 += "</tr>";

                    let row3 = "<tr>";
                    row3 += "<td class='align-middle' style='border-left: 3px black solid; border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-right: 3px black solid; border-bottom: 1px black solid; background: #f3faff; font-size: 2rem'>&nbsp;</td>";
                    row3 += "</tr>"

                    rows2 += row2
                    rows3 += row3
                } else {
                    let row2 = "<tr>";
                    row2 += "<td class='align-middle' style='border-left: 3px black solid; border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "<td class='align-middle' style='border-right: 3px black solid; border-bottom: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row2 += "</tr>";

                    let row3 = "<tr>";
                    row3 += "<td class='align-middle' style='border-left: 3px black solid; border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-bottom: 1px black solid; border-right: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "<td class='align-middle' style='border-right: 3px black solid; border-bottom: 1px black solid; font-size: 2rem'>&nbsp;</td>";
                    row3 += "</tr>"

                    rows2 += row2
                    rows3 += row3
                }
            }
        }

        $('#detail_tbody').html(rows);
        let dates = ordering_date.split('-')
        $('#ordering_send_from').html('(공급자 보관용) 작성일 ' + dates[0] + '년 ' + dates[1] + '월 ' + dates[2] + '일')
        $('#ordering_send_to').html('(공급 받는 자 보관용) 작성일 ' + dates[0] + '년 ' + dates[1] + '월 ' + dates[2] + '일')
        $('#from_detail_tbody').html(rows2);
        $('#to_detail_tbody').html(rows3);
        $('#detail_tbody > tr').on('click', function () {

            // table click highlight
            $(this).parent().find('tr').removeClass('clicked');
            $(this).addClass('clicked');
            selected_tr = $(this);

            let item_id = "";
            item_id = $(this).find("td[name=item_id]").text(); // 품번 ID

            $("#item_code").val(item_id).trigger("change");  // 품번
            $("#item_name").val(item_id).trigger("change");  // 품명

            let item_detail = "";
            item_detail = $(this).find("td[name=item_detail]").text();
            $("#item_detail").val(item_detail);  // 품명상세

            let item_unit = "";
            item_unit = $(this).find("td[name=item_unit]").text();
            $("#item_unit").val(item_unit);  // 품명단위

            let item_quantity = "";
            item_quantity = $(this).find("td[name=item_quantity]").text();
            $("#item_quantity").val(item_quantity);  // 수량

            let item_price = "";
            item_price = $(this).find("td[name=item_price]").text();
            $("#item_price").val(item_price);  // 단가

            let item_remark = "";
            item_remark = $(this).find("td[name=item_remark]").text();
            $("#item_remark").val(item_remark);  // 비고
        });

        count_total();
    }


    function set_info() {
        if (!ordering_id) return;

        let allData = {
            pk: ordering_id,
        }

        api_gp("/ordering/ordering_read/", 'GET', allData, (data) => {
            let done = data.results;

            let click_cu_id = done[0].code_id;
            let click_cu_code = done[0].code_code;
            let click_cu_name = done[0].code_name;

            let option1 = new Option(click_cu_code, click_cu_id, true, true);
            $('#id_cu_code_dis').append(option1).trigger('change');
            // 여기
            let option2 = new Option(click_cu_name, click_cu_id, true, true);
            $('#id_cu_name_dis').append(option2).trigger('change');

            $("#customer_code").val(done[0].code_id).trigger('change');  // 거래처코드
            $("#customer_name").val(done[0].code_id).trigger('change');  // 거래처명
            $("#licensee_number").val(done[0].licensee_number).trigger('change'); // 사업자번호
            $("#customer_owner_name").val(done[0].owner_name).trigger('change');  // 대표자명
            $("#business_conditions").val(done[0].business_conditions).trigger('change');  // 업태
            $("#business_event").val(done[0].business_event).trigger('change');  // 종목
            $("#office_post_code").val(done[0].postal_code).trigger('change');  // 우편번호
            $("#office_address").val(done[0].address).trigger('change');  // 주소
            $("#office_phone").val(done[0].office_phone).trigger('change');  // 회사전화번호
            $("#office_fax_number").val(done[0].office_fax).trigger('change');  // 팩스번호
            $("#person_in_charge").val(done[0].charge_name).trigger('change');  // 담당자
            $("#charge_level").val(done[0].charge_level).trigger('change');  // 직급
            $("#charge_phone").val(done[0].charge_phone).trigger('change');  // 담당자 연락처
            $("#email").val(done[0].email).trigger('change');  // 이메일
            $("#customer_note").val(done[0].etc).trigger('change');  // 비고

            $("#pay_option").val(done[0].pay_option);  // 결제조건
            $("#due_date").val(done[0].due_date);   // 납기일
            $("#guarantee_date").val(done[0].guarantee_date);  // 품질보증기한
            $("#deliver_place").val(done[0].deliver_place);  // 남품장소
            $("#note").val(done[0].note);  // NOTE 내용고정

            $('[name=ordering_to]').eq(0).text($("#id_cu_name_dis").text() + " 귀하")
            $('[name=ordering_to]').eq(1).text($("#id_cu_name_dis").text() + " 귀하")
        });
    }


    function set_item() {
        if (!ordering_id) return;

        let allData = {
            fk: ordering_id,
        }

        api_gp("/ordering/ordering_items_read/", 'GET', allData, (done) => {
            load_detail_table(done);
        });
    }


    function count_total() {
        let checked = $('#surtax_chk').is(":checked");

        let table = $('#detail_tbody tr');
        let sum_supply_price = 0;
        let sum_surtax = 0;
        let sum_supply_total = 0;

        for (let i = 0; i < table.length; i++) {
            let tr = table.eq(i);
            let supply_price = tr.find("td[name=supply_price]").text().replace(/,/g, "");  // 공급가
            let surtax = tr.find("td[name=surtax]").text().replace(/,/g, "");  // 부가세

            supply_price = parseFloat(supply_price);
            if (!isNumber(supply_price)) {
                supply_price = 0;
            }

            surtax = parseFloat(surtax);
            if (!isNumber(surtax)) {
                surtax = 0;
            }

            sum_supply_price += supply_price;

            if (checked == true) {
                sum_surtax += surtax;
                sum_supply_total += supply_price + surtax;
            } else {
                sum_supply_total += supply_price;
            }
        }
        $("#supply_price").val(sum_supply_price.toLocaleString());
        $("#surtax").val(sum_surtax.toLocaleString());
        $("#supply_total").val(sum_supply_total.toLocaleString());

        $("[name=ordering_supply_price]").eq(0).html(sum_supply_price.toLocaleString());
        $("[name=ordering_supply_price]").eq(1).html(sum_supply_price.toLocaleString());
        $("[name=ordering_surtax]").eq(0).html(sum_surtax.toLocaleString());
        $("[name=ordering_surtax]").eq(1).html(sum_surtax.toLocaleString());
        $("[name=ordering_supply_total]").eq(0).html(sum_supply_total.toLocaleString());
        $("[name=ordering_supply_total]").eq(1).html(sum_supply_total.toLocaleString());
        $("[name=ordering_supply_total]").eq(2).html(sum_supply_total.toLocaleString());
        $("[name=ordering_supply_total]").eq(3).html(sum_supply_total.toLocaleString());
    }

    $('#enterprise_address').change(function () {
        $('[name=ordering_enterprise_address]').eq(0).html($('#enterprise_address').val());
        $('[name=ordering_enterprise_address]').eq(1).html($('#enterprise_address').val());
    })


    function search_click() {
        nation1.page = 1;

        cu_name_sch = $("#id_cu_name_ord").val();

        reset_other_data();
        ordering_search();

        return false;
    }


    $('#surtax_chk').click(function () {
        let checked = $('#surtax_chk').is(":checked");
        refresh_detail_table(checked);
    });

    function craete_pdf_download() {
        if (ordering_id == null) {
            alert("주문서를 먼저 선택해 주세요");
            return;
        }
        if (myinfo_id == null || myinfo_id === "") {
            alert("사업장을 선택해 주세요");
            return;
        }
        html2canvas($('#print')[0], {
            scrollX: -8.5, scrollY: -window.scrollY, onclone: function (clonedDoc) {
                $(clonedDoc).find('#print').css('visibility', 'visible');
            }
        }).then(function (canvas) { //저장 영역 div id

            // 캔버스를 이미지로 변환
            var imgData = canvas.toDataURL('image/png');

            var imgWidth = 200; // 이미지 가로 길이(mm) / A4 기준 210mm
            var pageHeight = imgWidth * 1.414;  // 출력 페이지 세로 길이 계산 A4 기준
            var imgHeight = canvas.height * imgWidth / canvas.width;
            var heightLeft = imgHeight;
            var margin = 4; // 출력 페이지 여백설정
            var doc = new jsPDF('p', 'mm');
            var position = 8.5;

            // 첫 페이지 출력
            doc.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);
            heightLeft -= pageHeight;

            // 한 페이지 이상일 경우 루프 돌면서 출력
            while (heightLeft >= 0) {
                position = heightLeft - imgHeight;
                doc.addPage();
                doc.addImage(imgData, 'PNG', margin, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
            }

            doc.save('거래명세표-' + ordering_code + '.pdf')
        });
    }


    function refresh_detail_table(_checked) {
        if (_checked) {
            $('#detail_thead tr').eq(0).find("th[name=surtax]").removeClass("d-none");  // 부가세
            $('#detail_thead tr').eq(0).find("th[name=item_supply_total]").removeClass("d-none");  // 합계
        } else {
            $('#detail_thead tr').eq(0).find("th[name=surtax]").addClass("d-none");
            $('#detail_thead tr').eq(0).find("th[name=item_supply_total]").addClass("d-none");
        }

        let table = $('#detail_tbody tr');
        for (let i = 0; i < table.length; i++) {
            let tr = table.eq(i);
            let item_quantity = tr.find("td[name=item_quantity]").text().replace(/,/g, "");  // 수량
            let item_price = tr.find("td[name=item_price]").text().replace(/,/g, "");  // 단가
            let supply_price = tr.find("td[name=supply_price]").text().replace(/,/g, "");  // 공급가
            let surtax = tr.find("td[name=surtax]").text().replace(/,/g, "");  // 부가세
            let total = tr.find("td[name=item_supply_total]").text().replace(/,/g, "");  // 합계

            if (item_quantity == "") {  // 수량
                item_quantity = 0;
            } else {
                item_quantity = parseFloat(item_quantity);
            }

            if (item_price == "") {  // 단가
                item_price = 0;
            } else {
                item_price = parseFloat(item_price);
            }

            if (supply_price == "") {  // 공급가
                supply_price = 0;
            } else {
                supply_price = parseFloat(supply_price);
            }

            if (surtax == "") {  // 부가세
                surtax = 0;
            } else {
                surtax = parseFloat(surtax);
            }

            if (total == "") {  // 합계
                total = 0;
            } else {
                total = parseFloat(total);
            }

            if (_checked) {
                tr.find("td[name=surtax]").removeClass("d-none");  // 부가세 Visible (부가세 포함 계산)
                tr.find("td[name=item_supply_total]").removeClass("d-none");
                supply_price = item_quantity * item_price;
                surtax = supply_price * 0.1;
                total = supply_price + surtax;

                tr.find("td[name=item_quantity]").text(item_quantity.toLocaleString());  // 수량
                tr.find("td[name=item_price]").text(item_price.toLocaleString());  // 단가
                tr.find("td[name=supply_price]").text(supply_price.toLocaleString());  // 공급가
                tr.find("td[name=surtax]").text(surtax.toLocaleString());  // 부가세
                tr.find("td[name=item_supply_total]").text(total.toLocaleString());  // 합계

            } else {
                tr.find("td[name=surtax]").addClass("d-none");  // 부가세 Un-visible (부가세 제외 계산)
                tr.find("td[name=item_supply_total]").addClass("d-none");
                supply_price = item_quantity * item_price;
                surtax = 0;
                total = supply_price + surtax;

                tr.find("td[name=item_quantity]").text(item_quantity.toLocaleString());  // 수량
                tr.find("td[name=item_price]").text(item_price.toLocaleString());  // 단가
                tr.find("td[name=supply_price]").text(supply_price.toLocaleString());  // 공급가
                tr.find("td[name=surtax]").text(surtax.toLocaleString());  // 부가세
                tr.find("td[name=item_supply_total]").text(total.toLocaleString());  // 합계
            }
        }
        count_total();
    }


    function get_main_data() {
        let customer_code = $('#customer_code').val();
        {#let customer_name = $('#customer_name').val();#}
        let licensee_number = $('#licensee_number').val();
        let customer_owner_name = $('#customer_owner_name').val();
        let business_conditions = $('#business_conditions').val();
        let business_event = $('#business_event').val();
        let office_post_code = $('#office_post_code').val();
        let office_address = $('#office_address').val();
        let office_phone = $('#office_phone').val();
        let office_fax_number = $('#office_fax_number').val();
        let person_in_charge = $('#person_in_charge').val();
        let charge_level = $('#charge_level').val();
        let charge_phone = $('#charge_phone').val();
        let email = $('#email').val();
        let customer_note = $('#customer_note').val();

        let supply_total = $('#supply_total').val().replace(/,/g, "");
        let provide_surtax = $('#surtax_chk').is(":checked");

        let due_date = $('#due_date').val();
        let pay_option = $('#pay_option').val();
        let guarantee_date = $('#guarantee_date').val();
        let deliver_place = $('#deliver_place').val();
        let note = $('#note').val();

        return {
            code: customer_code,
            {#name: customer_name,#}
            licensee_number: licensee_number,
            owner_name: customer_owner_name,
            business_conditions: business_conditions,
            business_event: business_event,
            postal_code: office_post_code,
            address: office_address,
            office_phone: office_phone,
            office_fax: office_fax_number,
            charge_name: person_in_charge,
            charge_phone: charge_phone,
            charge_level: charge_level,
            email: email,
            etc: customer_note,

            provide_sum: supply_total,  // 공급가(총합계)
            provide_surtax: provide_surtax,  // 부가세포함

            due_date: due_date,
            pay_option: pay_option,
            guarantee_date: guarantee_date,
            deliver_place: deliver_place,
            note: note,
            itemData: JSON.stringify(get_sub_data())
        };
    }


    function get_sub_data() {
        let data_set = [];

        $('#detail_table > tbody > tr').each(function (index, tr) {
            console.log(index);
            tr = $(this);
            console.log(tr);

            data_set[index] = {
                item_id: tr.find("td[name=item_id]").text(),  // 품번 ID
                item_detail: tr.find("td[name=item_detail]").text(),  // 품명상세
                item_unit: tr.find("td[name=item_unit]").text(),  // 품명단위

                item_quantity: tr.find("td[name=item_quantity]").text().replace(/,/g, ""),  // 수량
                item_price: tr.find("td[name=item_price]").text().replace(/,/g, ""),  // 단가
                supply_price: tr.find("td[name=supply_price]").text().replace(/,/g, ""),  // 공급가
                surtax: tr.find("td[name=surtax]").text().replace(/,/g, ""),  // 부가세
                item_supply_total: tr.find("td[name=item_supply_total]").text().replace(/,/g, ""),  // 합계

                item_remarks: tr.find("td[name=item_remarks]").text(),
            }
        });

        return data_set;
    }


    function get_fname(_url) {
        let url = decodeURI(_url);
        let arSplitUrl = url.split("/");    //   "/" 로 전체 url 을 나눈다
        let nArLength = arSplitUrl.length - 1;

        if (nArLength == undefined || nArLength == null || nArLength == -1) {
            return '';
        }

        let sFileName = arSplitUrl[nArLength];   // 나누어진 배열의 맨 끝이 파일명이다
        console.log('sFileName', sFileName);

        if (sFileName == 'undefined') {
            return '';
        }


        return sFileName;
    }
</script>