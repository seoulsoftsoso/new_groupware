<!DOCTYPE html>
<html>
<header>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap4.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap4.min.js"></script>

    <script src="{% static 'js/api_adapter.js' %}" type="text/javascript"></script>

    <style>
        tr.selected {
            background-color: #ccc;
        }
        td {
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          max-width: 100px;
        }
    </style>

</header>

<body style="overflow: hidden;">

<div class="row">
  <div class="col-sm-6">
    <div class="card border-info m-2">
        <div class="card-header" style="text-align: center">품목 정보</div>
            <div class="card-body" style="max-width: 100%; overflow-x: auto;">
                <table id="main_item_table" class="table table-hover table-striped table-bordered" style="width: 100%; table-layout: fixed;">
                    <thead>
                    <tr class="table-active">
                      <th class="th-sm">순번
                      </th>
                      <th class="th-sm">품번
                      </th>
                      <th class="th-sm">품명
                      </th>
                      <th class="th-sm">품명상세
                      </th>
                      <th class="th-sm">모델
                      </th>
                    </tr>
                    </thead>
                <tbody>
                {% for item in data %}
                    <tr>
                        <td style="word-wrap: break-word;">{{ item.id }}</td>
                        <td style="word-wrap: break-word;">{{ item.code }}</td>
                        <td style="word-wrap: break-word;">{{ item.name }}</td>
                        <td style="word-wrap: break-word;">{{ item.detail }}</td>
                        <td style="word-wrap: break-word;">{{ item.model }}</td>
                    </tr>
                {% endfor %}
                </tbody>

                </table>
            </div>
        </div>
  </div>
  <div class="col-sm-6">
    <div class="card m-2">
        <div class="card border-info m-2">
            <div class="card-header" style="text-align: center">매출처
            </div>
            <div class="card-body">
                <button id="addRow" class="btn button-custom w-100">Add Row</button>
                <button id="editRow">Edit Row</button>
                <button id="deleteRow">Delete Row</button>
                <table id="sub_sup_table" class="table table-hover table-striped table-bordered">

                </table>

            </div>
        </div>

        <div class="card border-info m-2">
            <div class="card-header" style="text-align: center">매입처
            </div>
            <div class="card-body">
                <table id="sub_cus_table" class="table table-hover table-striped table-bordered">

                </table>
            </div>
        </div>
    </div>
  </div>

</div>
</body>

</html>

<script>
    $(document).ready(function () {

        let selected_row = null;

        let table = $('#main_item_table').DataTable(
            {
                "rowCallback": function(row, data) {
                    $(row).on('click', function() {
                        if (selected_row !== null) {
                            $(selected_row).removeClass('selected');
                          }
                          $(this).addClass('selected');
                          selected_row = this;

                          set_subtables();
                    });
                }
            }
        );

        // $('#example tbody').on('click', 'tr', function (row, data) {
        // let data = table.row(this).data();
        //  $(this).toggleClass('selected');

        // });
    });

    function set_subtables(){

    }

</script>
