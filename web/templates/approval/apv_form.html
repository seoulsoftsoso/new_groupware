{% load static %}
<!DOCTYPE html>

<meta charset="UTF-8">
{% include 'admins/admin_header.html' %}
<style>
    /* 모바일웹 텍스트 줄바꿈 방지 */
    .table td, .table th {
        white-space: nowrap;
    }

    @media (max-width: 1000px) {
    }
</style>
<body>

<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">

        {% include 'admins/index_sidemenu.html' %}

        <!-- header -->
        <div class="layout-page" style="">
            {% include 'admins/topnav.html' %}

            <div class="d-flex justify-content-between flex-xl-row flex-md-column flex-sm-row flex-column px-3 pb-2">
                <div class="mb-xl-0 mb-4">
                    <div class="d-flex svg-illustration mb-2 gap-2">
                        <a href="{% url 'apv_list' %}">
                            <strong style="color: #000; font-size: x-large; margin-left: 20px; font-family: Pretendard;">전자결재</strong></a>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-between" style="padding: 0 2% 0 2%;">
                <div class="d-flex justify-content-start">
                    {#왼쪽 공간#}
                </div>
                <div class="d-flex justify-content-end">
                    <div style="padding: 0 0 0 50px;">
                        <button type="submit" class="btn btn-primary me-2">저장</button>
                        <button class="btn btn-secondary me-2" onclick="window.history.back();">취소</button>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-start" style="padding: 2% 2% 2% 2%;">
                <form method="post" class="w-100">
                    {% csrf_token %}
                    {% for field in form %}
                        <div class="mb-3" id="{{ field.name }}_field">
                            <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                            {{ field }}
                            {% if field.errors %}
                                <div class="text-danger">
                                    {{ field.errors }}
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                    <div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary me-2">저장</button>
                        <a href="{% url 'apv_list' %}" class="btn btn-secondary">취소</a>
                    </div>
                </form>
            </div>


        </div>
    </div>
</div>

</body>
{% include 'admins/admin_footer.html' %}

<script>

$(document).ready(function() {
        function toggleFields() {
            var category = $('#id_apv_category').val();
            $('.mb-3').hide(); // 모든 필드를 숨김
            $('#id_apv_category_field').show(); // 카테고리 필드만 항상 보이도록
            $('#id_doc_title_field').show(); // 기본 필드 보이기 (예: 제목)

            if (category === '카테고리1') {
                $('#id_special_comment_field').show();
                $('#id_deadline_field').show();
                // 추가 필드 표시
            } else if (category === '카테고리2') {
                $('#id_payment_method_field').show();
                $('#id_related_team_field').show();
                // 추가 필드 표시
            } else if (category === '카테고리3') {
                $('#id_period_from_field').show();
                $('#id_period_to_field').show();
                $('#id_leave_reason_field').show();
                // 추가 필드 표시
            } else {
                // 모든 필드를 기본으로 보여주기
                $('.mb-3').show();
            }
        }

        $('#id_apv_category').change(function() {
            toggleFields();
        });

        toggleFields(); // 페이지 로드 시 필드를 토글
    });

</script>